version: "3.8"
services:
  app:
    container_name: payments
    build: 
      args:
        - GIN_MODE=debug
        - PORT=8080
      context: .
    image: gotest:1
    command: gow run .
    networks:
      - go-net
    ports: 
      - 8080:8080
    volumes:
      - .:/app
  db:
    container_name: mongodb
    image: mongo
    volumes:
      - ./db:/data/db
    ports: 
      - 27017:27017
    networks:
      - go-net
    environment:
      MONGO_INITDB_ROOT_USERNAME: svany
      MONGO_INITDB_ROOT_PASSWORD: Svan!Doe2
      MONGO_INITDB_DATABASE: nanobastardo
    restart: always
volumes: 
  mongodb-data:
networks:
  go-net: 